{"version":3,"sources":["../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../Documents/Dandelionz_App/lib/api/authApi.ts","../../../../../../Documents/Dandelionz_App/app/verify-email/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","import { baseApi } from \"./baseApi\";\r\n\r\ninterface RegisterRequest {\r\n  email: string;\r\n  password: string;\r\n  phone_number: string;\r\n  full_name: string;\r\n  role: \"CUSTOMER\" | \"VENDOR\";\r\n  referral_code?: string;\r\n}\r\n\r\ninterface LoginRequest {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\ninterface AuthResponse {\r\n  success: boolean;\r\n  data: {\r\n    user: {\r\n      uuid: string;\r\n      email: string;\r\n      full_name: string;\r\n      phone_number: string;\r\n      profile_picture: string | null;\r\n      role: string;\r\n      is_verified: boolean;\r\n      is_active: boolean;\r\n      created_at: string;\r\n      referral_code: string;\r\n    };\r\n    tokens: {\r\n      access_token: string;\r\n      refresh_token: string;\r\n      token_type: string;\r\n      expires_in: number;\r\n      refresh_expires_in: number;\r\n      user_uuid: string;\r\n      issued_at: number;\r\n    };\r\n    is_new_user?: boolean;\r\n    email_verified: boolean;\r\n    verification_needed?: boolean;\r\n  };\r\n}\r\n\r\ninterface RefreshTokenRequest {\r\n  refresh_token: string;\r\n}\r\n\r\ninterface PasswordResetRequest {\r\n  email: string;\r\n}\r\n\r\ninterface VerifyEmailRequest {\r\n  uid: string;\r\n  token: string;\r\n}\r\n\r\nexport const authApi = baseApi.injectEndpoints({\r\n  endpoints: (builder) => ({\r\n    // Register\r\n    register: builder.mutation<AuthResponse, RegisterRequest>({\r\n      query: (credentials) => ({\r\n        url: \"/auth/register/\",\r\n        method: \"POST\",\r\n        body: credentials,\r\n      }),\r\n      invalidatesTags: [\"Auth\"],\r\n    }),\r\n\r\n    // Login\r\n    login: builder.mutation<AuthResponse, LoginRequest>({\r\n      query: (credentials) => ({\r\n        url: \"/auth/login/\",\r\n        method: \"POST\",\r\n        body: credentials,\r\n      }),\r\n      invalidatesTags: [\"Auth\"],\r\n    }),\r\n\r\n    // Refresh Token\r\n    refreshToken: builder.mutation<\r\n      AuthResponse[\"data\"][\"tokens\"],\r\n      RefreshTokenRequest\r\n    >({\r\n      query: (body) => ({\r\n        url: \"/auth/token/refresh/\",\r\n        method: \"POST\",\r\n        body,\r\n      }),\r\n    }),\r\n\r\n    // Password Reset\r\n    requestPasswordReset: builder.mutation<\r\n      { success: boolean; message: string },\r\n      PasswordResetRequest\r\n    >({\r\n      query: (body) => ({\r\n        url: \"/auth/password-reset/\",\r\n        method: \"POST\",\r\n        body,\r\n      }),\r\n    }),\r\n\r\n    // Check Verification Status\r\n    checkVerification: builder.query<\r\n      { success: boolean; data: { is_verified: boolean } },\r\n      void\r\n    >({\r\n      query: () => \"/auth/check-verification/\",\r\n      providesTags: [\"Auth\"],\r\n    }),\r\n\r\n    // Send Verification Email\r\n    sendVerificationEmail: builder.mutation<\r\n      { success: boolean; message: string },\r\n      void\r\n    >({\r\n      query: () => ({\r\n        url: \"/auth/send-verification/\",\r\n        method: \"POST\",\r\n      }),\r\n    }),\r\n\r\n    // Verify Email\r\n    verifyEmail: builder.mutation<\r\n      { success: boolean; message: string },\r\n      VerifyEmailRequest\r\n    >({\r\n      query: (body) => ({\r\n        url: \"/auth/verify-email/\",\r\n        method: \"POST\",\r\n        body,\r\n      }),\r\n      invalidatesTags: [\"Auth\"],\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const {\r\n  useRegisterMutation,\r\n  useLoginMutation,\r\n  useRefreshTokenMutation,\r\n  useRequestPasswordResetMutation,\r\n  useCheckVerificationQuery,\r\n  useSendVerificationEmailMutation,\r\n  useVerifyEmailMutation,\r\n} = authApi;\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport AppLayout from '@/components/AppLayout';\r\nimport { useVerifyEmailMutation } from '@/lib/api/authApi';\r\n\r\nexport default function VerifyEmailPage() {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const token = searchParams.get('token');\r\n  const uid = searchParams.get('uid');\r\n  const [verifyEmail, { isLoading, isSuccess, isError, error }] = useVerifyEmailMutation();\r\n  const [countdown, setCountdown] = useState(5);\r\n  const [verificationAttempted, setVerificationAttempted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (token && uid && !verificationAttempted) {\r\n      setVerificationAttempted(true);\r\n      verifyEmail({ token, uid });\r\n    }\r\n  }, [token, uid, verifyEmail, verificationAttempted]);\r\n\r\n  useEffect(() => {\r\n    if (isSuccess && countdown > 0) {\r\n      const timer = setTimeout(() => setCountdown(countdown - 1), 1000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n    if (isSuccess && countdown === 0) {\r\n      router.push('/login');\r\n    }\r\n  }, [isSuccess, countdown, router]);\r\n\r\n  return (\r\n    <AppLayout showBottomNav={false}>\r\n      <div className=\"min-h-screen flex flex-col items-center justify-center p-6\">\r\n        {isLoading && (\r\n          <>\r\n            <div className=\"w-16 h-16 border-4 border-system-blue-light border-t-transparent rounded-full animate-spin mb-6\"></div>\r\n            <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Verifying your email...</h1>\r\n            <p className=\"text-sm text-gray-600 text-center\">Please wait while we verify your email address</p>\r\n          </>\r\n        )}\r\n\r\n        {isSuccess && (\r\n          <>\r\n            <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6\">\r\n              <svg className=\"w-10 h-10 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\r\n              </svg>\r\n            </div>\r\n            <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Email Verified!</h1>\r\n            <p className=\"text-sm text-gray-600 text-center mb-4\">\r\n              Your email has been successfully verified. You can now login to your account.\r\n            </p>\r\n            <p className=\"text-sm text-gray-500\">Redirecting to login in {countdown} seconds...</p>\r\n            <button\r\n              onClick={() => router.push('/login')}\r\n              className=\"mt-6 px-6 py-3 bg-system-blue-light text-white rounded-lg font-medium hover:bg-[#020360] transition-colors\"\r\n            >\r\n              Go to Login\r\n            </button>\r\n          </>\r\n        )}\r\n\r\n        {isError && (\r\n          <>\r\n            <div className=\"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mb-6\">\r\n              <svg className=\"w-10 h-10 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </div>\r\n            <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Verification Failed</h1>\r\n            <p className=\"text-sm text-gray-600 text-center mb-6\">\r\n              {(error as any)?.data?.message || 'The verification link is invalid or has expired.'}\r\n            </p>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => router.push('/verify-notice')}\r\n                className=\"px-6 py-3 bg-system-blue-light text-white rounded-lg font-medium hover:bg-[#020360] transition-colors\"\r\n              >\r\n                Resend Verification Email\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {(!token || !uid) && !isLoading && !isSuccess && !isError && (\r\n          <>\r\n            <div className=\"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mb-6\">\r\n              <svg className=\"w-10 h-10 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n              </svg>\r\n            </div>\r\n            <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Invalid Verification Link</h1>\r\n            <p className=\"text-sm text-gray-600 text-center mb-6\">\r\n              The verification link is missing required parameters. Please check the link or request a new one.\r\n            </p>\r\n            <button\r\n              onClick={() => router.push('/verify-email/resend')}\r\n              className=\"px-6 py-3 bg-system-blue-light text-white rounded-lg font-medium hover:bg-[#020360] transition-colors\"\r\n            >\r\n              Resend Verification Email\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </AppLayout>\r\n  );\r\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3]}