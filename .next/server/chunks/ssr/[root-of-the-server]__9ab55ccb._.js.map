{"version":3,"sources":["../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../Documents/Dandelionz_App/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../Documents/Dandelionz_App/lib/api/authApi.ts","../../../../../../Documents/Dandelionz_App/app/forgot-password/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","import { baseApi } from \"./baseApi\";\r\n\r\ninterface RegisterRequest {\r\n  email: string;\r\n  password: string;\r\n  phone_number: string;\r\n  full_name: string;\r\n  role: \"CUSTOMER\" | \"VENDOR\";\r\n  referral_code?: string;\r\n}\r\n\r\ninterface LoginRequest {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\ninterface AuthResponse {\r\n  success: boolean;\r\n  data: {\r\n    user: {\r\n      uuid: string;\r\n      email: string;\r\n      full_name: string;\r\n      phone_number: string;\r\n      profile_picture: string | null;\r\n      role: string;\r\n      is_verified: boolean;\r\n      is_active: boolean;\r\n      created_at: string;\r\n      referral_code: string;\r\n    };\r\n    tokens: {\r\n      access_token: string;\r\n      refresh_token: string;\r\n      token_type: string;\r\n      expires_in: number;\r\n      refresh_expires_in: number;\r\n      user_uuid: string;\r\n      issued_at: number;\r\n    };\r\n    is_new_user?: boolean;\r\n    email_verified: boolean;\r\n    verification_needed?: boolean;\r\n  };\r\n}\r\n\r\ninterface RefreshTokenRequest {\r\n  refresh_token: string;\r\n}\r\n\r\ninterface PasswordResetRequest {\r\n  email: string;\r\n}\r\n\r\ninterface VerifyEmailRequest {\r\n  uid: string;\r\n  token: string;\r\n}\r\n\r\nexport const authApi = baseApi.injectEndpoints({\r\n  endpoints: (builder) => ({\r\n    // Register\r\n    register: builder.mutation<AuthResponse, RegisterRequest>({\r\n      query: (credentials) => ({\r\n        url: \"/auth/register/\",\r\n        method: \"POST\",\r\n        body: credentials,\r\n      }),\r\n      invalidatesTags: [\"Auth\"],\r\n    }),\r\n\r\n    // Login\r\n    login: builder.mutation<AuthResponse, LoginRequest>({\r\n      query: (credentials) => ({\r\n        url: \"/auth/login/\",\r\n        method: \"POST\",\r\n        body: credentials,\r\n      }),\r\n      invalidatesTags: [\"Auth\"],\r\n    }),\r\n\r\n    // Refresh Token\r\n    refreshToken: builder.mutation<\r\n      AuthResponse[\"data\"][\"tokens\"],\r\n      RefreshTokenRequest\r\n    >({\r\n      query: (body) => ({\r\n        url: \"/auth/token/refresh/\",\r\n        method: \"POST\",\r\n        body,\r\n      }),\r\n    }),\r\n\r\n    // Password Reset\r\n    requestPasswordReset: builder.mutation<\r\n      { success: boolean; message: string },\r\n      PasswordResetRequest\r\n    >({\r\n      query: (body) => ({\r\n        url: \"/auth/password-reset/\",\r\n        method: \"POST\",\r\n        body,\r\n      }),\r\n    }),\r\n\r\n    // Check Verification Status\r\n    checkVerification: builder.query<\r\n      { success: boolean; data: { is_verified: boolean } },\r\n      void\r\n    >({\r\n      query: () => \"/auth/check-verification/\",\r\n      providesTags: [\"Auth\"],\r\n    }),\r\n\r\n    // Send Verification Email\r\n    sendVerificationEmail: builder.mutation<\r\n      { success: boolean; message: string },\r\n      void\r\n    >({\r\n      query: () => ({\r\n        url: \"/auth/send-verification/\",\r\n        method: \"POST\",\r\n      }),\r\n    }),\r\n\r\n    // Verify Email\r\n    verifyEmail: builder.mutation<\r\n      { success: boolean; message: string },\r\n      VerifyEmailRequest\r\n    >({\r\n      query: (body) => ({\r\n        url: \"/auth/verify-email/\",\r\n        method: \"POST\",\r\n        body,\r\n      }),\r\n      invalidatesTags: [\"Auth\"],\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const {\r\n  useRegisterMutation,\r\n  useLoginMutation,\r\n  useRefreshTokenMutation,\r\n  useRequestPasswordResetMutation,\r\n  useCheckVerificationQuery,\r\n  useSendVerificationEmailMutation,\r\n  useVerifyEmailMutation,\r\n} = authApi;\r\n","'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport AppLayout from '@/components/AppLayout';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useRequestPasswordResetMutation } from '@/lib/api/authApi';\r\n\r\nexport default function ForgotPasswordPage() {\r\n  const router = useRouter();\r\n  const [requestReset, { isLoading, isSuccess, error }] = useRequestPasswordResetMutation();\r\n  \r\n  const [email, setEmail] = useState('');\r\n  const [validationError, setValidationError] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setValidationError('');\r\n\r\n    if (!email) {\r\n      setValidationError('Please enter your email address');\r\n      return;\r\n    }\r\n\r\n    // Basic email validation\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      setValidationError('Please enter a valid email address');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await requestReset({ email }).unwrap();\r\n    } catch (err: any) {\r\n      console.error('Password reset request failed:', err);\r\n      // Don't show error to prevent email enumeration\r\n      // The API returns success even if email doesn't exist\r\n    }\r\n  };\r\n\r\n  if (isSuccess) {\r\n    return (\r\n      <AppLayout showBottomNav={false}>\r\n        <div className=\"min-h-screen flex flex-col items-center justify-center p-6\">\r\n          <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6\">\r\n            <svg className=\"w-10 h-10 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n            </svg>\r\n          </div>\r\n          <h1 className=\"text-xl font-semibold text-gray-900 mb-2\">Check Your Email</h1>\r\n          <p className=\"text-sm text-gray-600 text-center mb-6 max-w-md\">\r\n            If an account exists with <span className=\"font-semibold\">{email}</span>, we've sent a password reset link to your email.\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 text-center mb-6 max-w-md\">\r\n            Didn't receive the email? Check your spam folder or try again.\r\n          </p>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => {\r\n                setEmail('');\r\n                window.location.reload();\r\n              }}\r\n              className=\"px-6 py-3 bg-white text-gray-700 border border-gray-300 rounded-lg font-medium hover:bg-gray-50 transition-colors\"\r\n            >\r\n              Try Again\r\n            </button>\r\n            <button\r\n              onClick={() => router.push('/login')}\r\n              className=\"px-6 py-3 bg-system-blue-light text-white rounded-lg font-medium hover:bg-[#020360] transition-colors\"\r\n            >\r\n              Back to Login\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </AppLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AppLayout showBottomNav={false}>\r\n      <div className=\"min-h-screen flex flex-col p-6\">\r\n        {/* Back Button */}\r\n        <button onClick={() => router.back()} className=\"self-start mb-8\">\r\n          <svg className=\"w-6 h-6 text-gray-900\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Title */}\r\n        <h1 className=\"text-2xl font-semibold text-gray-900 mb-2\">\r\n          Forgot Password?\r\n        </h1>\r\n        <p className=\"text-sm text-gray-600 mb-8\">\r\n          Enter your email address and we'll send you a link to reset your password.\r\n        </p>\r\n\r\n        {/* Error Message */}\r\n        {(validationError || error) && (\r\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n            <p className=\"text-sm text-red-600\">\r\n              {validationError || 'An error occurred. Please try again.'}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Reset Password Form */}\r\n        <form onSubmit={handleSubmit} className=\"flex flex-col gap-6\">\r\n          <div className=\"flex flex-col gap-2\">\r\n            <label htmlFor=\"email\" className=\"text-sm text-gray-600\">\r\n              Email Address\r\n            </label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              className=\"w-full px-4 py-3 border-b border-gray-300 focus:border-system-blue-light focus:outline-none transition-colors\"\r\n              required\r\n              disabled={isLoading}\r\n              autoComplete=\"email\"\r\n            />\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className=\"w-full py-3.5 bg-system-blue-light text-white rounded-lg font-medium hover:bg-[#020360] transition-colors mt-4 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {isLoading ? 'Sending...' : 'Send Reset Link'}\r\n          </button>\r\n\r\n          {/* Back to Login Link */}\r\n          <p className=\"text-center text-sm text-gray-600 mt-4\">\r\n            Remember your password?{' '}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.push('/login')}\r\n              className=\"text-system-blue-light font-medium\"\r\n            >\r\n              Sign In\r\n            </button>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </AppLayout>\r\n  );\r\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient"],"mappings":"gjBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,EACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,EACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,EACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,8BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,EACRC,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,yBC0I/C,GAAM,CACX,qBAAmB,kBACnB,CAAgB,yBAChB,CAAuB,iCACvB,CAA+B,2BAC/B,CAAyB,kCACzB,CAAgC,CAChC,wBAAsB,CACvB,CApJD,AA2DuB,EAyFnB,AApJJ,CAAA,CAAA,OA2DuB,OAAO,CAAC,eAAe,CAAC,CAC7C,UAAW,AAAC,IAAa,CAEvB,KAFsB,IAEZ,EAAQ,QAAQ,CAAgC,CACxD,MAAQ,AAAD,GAAkB,EACvB,IAAK,KADiB,aAEtB,OAAQ,OACR,KAAM,EACR,CAAC,CACD,gBAAiB,CAAC,OAAO,AAC3B,GAGA,MAAO,EAAQ,QAAQ,CAA6B,CAClD,MAAO,AAAC,IAAiB,CACvB,IAAK,KADiB,UAEtB,OAAQ,OACR,KAAM,EACR,CAAC,CACD,gBAAiB,CAAC,OAAO,AAC3B,GAGA,aAAc,EAAQ,QAAQ,CAG5B,CACA,MAAO,AAAC,IAAU,CAChB,EADe,EACV,uBACL,OAAQ,YACR,EACF,CAAC,AACH,GAGA,qBAAsB,EAAQ,QAAQ,CAGpC,CACA,MAAO,AAAC,GAAU,EAChB,EADe,EACV,wBACL,OAAQ,YACR,EACF,CAAC,AACH,GAGA,kBAAmB,EAAQ,KAAK,CAG9B,CACA,MAAO,IAAM,4BACb,aAAc,CAAC,OAAO,AACxB,GAGA,sBAAuB,EAAQ,QAAQ,CAGrC,CACA,MAAO,IAAM,CAAC,CACZ,IAAK,2BACL,OAAQ,OACV,CAAC,AACH,GAGA,YAAa,EAAQ,QAAQ,CAG3B,CACA,MAAO,AAAC,IAAU,CAChB,EADe,EACV,sBACL,OAAQ,YACR,CACF,CAAC,EACD,gBAAiB,CAAC,OAAO,AAC3B,GACF,CACF,AADG,8MCvIH,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAc,WAAE,CAAS,WAAE,CAAS,OAAE,CAAK,CAAE,CAAC,CAAG,CAAA,EAAA,EAAA,+BAA+B,AAA/B,IAElD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAEjD,EAAe,MAAO,IAI1B,GAHA,EAAE,cAAc,GAChB,EAAmB,IAEf,CAAC,EAAO,YACV,EAAmB,mCAMrB,GAAI,CADe,AACd,6BAAW,IAAI,CAAC,GAAQ,YAC3B,EAAmB,sCAIrB,GAAI,CACF,MAAM,EAAa,OAAE,CAAM,GAAG,MAAM,EACtC,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,iCAAkC,EAGlD,CACF,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,GAAA,CAFW,CAEV,EAAA,OAAS,CAAA,CAAC,eAAe,WACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qFACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BAA2B,KAAK,OAAO,OAAO,eAAe,QAAQ,qBAClF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,6GAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,qBACzD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,4DAAkD,6BACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAiB,IAAa,uDAE1E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2DAAkD,mEAG/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAS,IACT,OAAO,QAAQ,CAAC,MAAM,EACxB,EACA,UAAU,6HACX,cAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,IAAI,CAAC,UAC3B,UAAU,iHACX,0BAUT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAS,CAAA,CAAC,eAAe,WACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,EAAO,IAAI,GAAI,UAAU,2BAC9C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBAAwB,KAAK,OAAO,OAAO,eAAe,QAAQ,qBAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,wBAKzE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qDAA4C,qBAG1D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,+EAKzC,AAAC,IAAmB,CAAA,CAAK,EACxB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCACV,GAAmB,2CAM1B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,gCACtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,QAAQ,UAAU,iCAAwB,kBAGzD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,UAAU,gHACV,QAAQ,CAAA,CAAA,EACR,SAAU,EACV,aAAa,aAKjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,0KAET,EAAY,aAAe,oBAI9B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mDAAyC,0BAC5B,IACxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAO,IAAI,CAAC,UAC3B,UAAU,8CACX,sBAQb","ignoreList":[0,1,2,3]}